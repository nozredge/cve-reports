let currentIndex = 0;
let retrievedData = null;
let tbody = document.querySelector('table').children[1];

window.onload = () =>
{
    askForData();
}

let cleanTable = () => 
{
    tbody.innerHTML = "";
}



let goToNextPage = () => 
{
    currentIndex += 4;
    cleanTable();
    loadPage();
};

let goToPreviousPage = () =>
{
    if(currentIndex > 0)
    {
        currentIndex -= 4;
        cleanTable();
        loadPage();
    }
};

let loadPage = () =>
{
    for ( let index = currentIndex; index < currentIndex + 4; index++ )
    {
        let row = tbody.appendChild(document.createElement("tr"));

        row.appendChild(document.createElement("td")).textContent = retrievedData[index].id;
        row.appendChild(document.createElement("td")).textContent = retrievedData[index].summary;
        row.appendChild(document.createElement("td")).textContent = retrievedData[index].published;
        row.appendChild(document.createElement("td")).textContent = retrievedData[index].last_modified;
    }
}

let askForData = () =>
{
    let api_url = 'https://ullx7qjpd8.execute-api.us-east-1.amazonaws.com/last';

    fetch(api_url)
    .then( (response) => response.json() )
    .then( (data) => 
    {
        retrievedData = data;
        loadPage();
    })
    .catch( err => console.log(err) );
};
